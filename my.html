<html>
    <head></head>
    <script src="http://libs.baidu.com/jquery/2.1.4/jquery.min.js"></script>
    <body>
        <div>
            <div><button id="btnWeb">网页</button></div>
            <hr>
            <div>======成本======</div>
            <table>
                <tr>
                    <td>商品成本(RMB)</td>
                    <td>: <input id="cost" value="20"></td>
                </tr>
                <tr>
                    <td>快递费(RMB)</td>
                    <td>: <input id="expressFee" value="12"></td>
                </tr>
                <tr>
                    <td>盈利比例</td>
                    <td>: <input id="rate" value="10">%</td>
                </tr>
                <tr>
                    <td>重量(KG)</td>
                    <td>: <input id="weight" value="0.4"></td>
                </tr>
                <tr>
                    <td></td>
                    <td>
                        <span id="expressFree"></span>
                        <input type="hidden" id="myA" value="0">
                        <input type="hidden" id="myB" value="0">
                        <input type="hidden" id="myC" value="0">
                    </td>
                </tr>
                <tr>
                    <td></td>
                    <td><button id="btn">按回车计算</button></td>
                </tr>
            </table>
        </div>
        <div>
            <hr>
            <div>======比例======</div>
        </div>
        <div>
            <hr>
            <div>总成本： <span id="totalCost" style="color: red">0</span> RM</div>
            <div>得出包邮单价： <span id="res" style="color: red">0</span> RM</div>
        </div>
    </body>
    <script>
        String.prototype.format = function(){
            var args = arguments;
            return this.replace(/\{(\d+)\}/gm, function(ms, p1){return typeof(args[p1]) == 'undefined' ? ms : args[p1]});
        }

        $(function(){
            var rmToRmb = 1.68
            var rmbToRm = 0.59

            $("#btnWeb").on("click", function(){
                window.open("https://seller.shopee.com.my").location;
                window.open("https://www.1688.com").location;
                window.open("https://shopee.com.my").location;
                window.open("https://fanyi.baidu.com/").location;
                window.open("https://docs.google.com/spreadsheets/d/13DCV3qM64u4vf9EjIpXBXCs7oF8c60-2xPWqSrtTIVY/edit?ts=5d3c11d2#gid=0").location;
            });

            function countFree(){
                var weight = $("#weight").val();
                var overWeight = weight - 1;
                var myA = 0;
                var myB = 0;
                var myC = 0;
                
                if(weight > 0.01){
                    myA = 3.95;
                    myB = 4.95;
                    myC = 4.95;
                }

                if(overWeight > 0){
                    var part1 = 0.99 / 0.01 * 0.15;
                    myA += part1 + overWeight/0.01*0.15;
                    myB += part1 + overWeight/0.01*0.15 + overWeight/0.25*1.5;
                    myC += part1 + overWeight/0.01*0.15 + overWeight/0.25*1.5;
                }else{
                    myA += (weight-0.01)/0.01*0.15;
                    myB += (weight-0.01)/0.01*0.15;
                    myC += (weight-0.01)/0.01*0.15;
                }

                myA = Math.round(myA*100)/100
                myB = Math.round(myB*100)/100
                myC = Math.round(myC*100)/100

                $("#expressFree").text("A区：({0}RM);B区：({1}RM);C区:({2}RM);".format(myA,myB,myC));
                $("#myA").val(myA)
                $("#myB").val(myB)
                $("#myC").val(myC)
            }

            $("#weight").on("change", function(){
                countFree();
            })

            $("#btn").on("click", function(){
                countFree();

                var totalCostA = (rmbToRm * (parseFloat($("#cost").val()) + parseFloat($("#expressFee").val())) +
                parseFloat($("#myA").val())
                )

                var totalCostB = (rmbToRm * (parseFloat($("#cost").val()) + parseFloat($("#expressFee").val())) +
                parseFloat($("#myB").val())
                )

                var totalCostC = (rmbToRm * (parseFloat($("#cost").val()) + parseFloat($("#expressFee").val())) +
                parseFloat($("#myC").val())
                )
                
                totalCostA = Math.round(totalCostA*100)/100
                totalCostB = Math.round(totalCostB*100)/100
                totalCostC = Math.round(totalCostC*100)/100

                $("#totalCost").text("A区：" + finalPriceA + ", B区：" + finalPriceB + "， C区" + finalPriceC)

                var finalPriceA = Math.round(totalCostA*(100+parseFloat($("#rate").val())))/100
                var finalPriceB = Math.round(totalCostB*(100+parseFloat($("#rate").val())))/100
                var finalPriceC = Math.round(totalCostC*(100+parseFloat($("#rate").val())))/100

                $("#res").text("A区：" + finalPriceA + ", B区：" + finalPriceB + "， C区" + finalPriceC)
            })

            $(document).keyup(function(event){
                if(event.keyCode ==13){
                    $("#btn").trigger("click");
                }
            });

            countFree();
        })
    </script>
</html>